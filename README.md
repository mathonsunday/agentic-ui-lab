# You Are The Research Assistant
**An agentic UI exploring protocol adoption for AI agents with personality-driven responses and real-time state synchronization**

## Overview

In this experience, the AI agent is not the assistant - *you* are. The AI agent is a prickly, obsessive marine biologist named Dr. Mira Petrovic who evaluates your scientific curiosity and engagement through real-time Claude analysis. Her personality shifts from dismissive to reverent based on your interaction quality.

It demonstrates modern agentic UI patterns (AG-UI, MCP-UI) with a focus on streaming protocols, real-time state synchronization, and personality-driven AI responsesâ€”all wrapped in an artistic deep-sea terminal experience.

This is both a **learning lab for emerging agent protocols** and a **showcase of sophisticated full-stack patterns** for building AI-driven applications where personality and technical rigor coexist.

## ðŸŒŠ What Makes This Special

### Protocol & Architecture
- **AG-UI Event Streaming**: Structured event envelopes with correlation IDs, sequence numbers, and parent-event tracking for proper event causality
- **MCP-UI Tool Protocol**: Tools return structured results with status, artifacts, metadata, and UI update commands
- **Versioned State Sync**: Client-server state synchronization with version tracking, conflict detection, and optimistic update rollback
- **Schema Migration**: Forward-compatible types with `__version` and `__extensions` fields for seamless protocol evolution
- **Event Buffering**: Out-of-order event reordering using sequence numbers (handles network packet reordering)
- **Optimistic Updates**: Client-side UI updates with automatic rollback if server rejects changes
- **Conflict Detection**: Checksummed state versions prevent divergence between client and server
- **State Patches**: JSON Patch (RFC 6902) for efficient delta state synchronization
- **EventBuffer + Deduplication**: Out-of-order event reordering and duplicate suppression
- **State Machine Pattern**: Type-safe FSM with discriminated union types (IDLE â†’ STREAMING â†’ ERROR)

### Technology Stack

**Frontend**
- React 18 + Hooks (useReducer for FSM)
- TypeScript with strict type safety
- Vite (sub-500ms builds, fast HMR)
- Web Audio API for synthesized sound effects
- Vitest + React Testing Library 

**Backend**
- Vercel Serverless Functions for scalable server runtime
- Server-Sent Events (SSE) for real-time streaming analysis
- Anthropic SDK (Claude Haiku 4.5) for user analysis and personality-driven responses
- TypeScript with discriminated unions and branded types
- Event sequencing and deduplication for reliable streaming

### Terminal UI with Personality
- **Zoomable Deep-Sea Creatures**: ASCII art with 3 zoom levels (far/medium/close) showing progressive depth and detail
- **3-Personality System**: Negative (<34% confidence), Chaotic (34-67% confidence), and Glowing (68%+ confidence) - dynamically generated by Claude based on Mira's confidence arc
- **Personality-Driven Responses**: Claude generates responses matching Mira's personality tier, with detailed prompts engineering tone shifts from dismissive, to philosophical, to reverent as confidence grows
- **Interactive Tools**: Zoom in/out controls trigger both UI changes and backend state mutations
- **Confidence Tracking**: Real-time rapport system (0-100%) that evaluates five dimensions: thoughtfulness, adventurousness, engagement, curiosity, and superficiality
- **Streaming Analysis**: Server-Sent Events deliver Claude's analysis and personality-driven responses streamed line-by-line for real-time interaction
- **System Log**: Real-time event log showing evaluation metrics, observations, thoughts, and confidence deltas

## ðŸš€ Getting Started

```bash
# Install dependencies
npm install

# Run development server
npm run dev

# Build for production
npm run build

# Run tests
npm run test
```

## ðŸŽ¨ Artistic Vision

Beyond the technical protocols, You Are The Research Assistant maintains an artistic theme of deep-sea research and discovery:

- **Terminal Aesthetic**: UI designed to feel like research equipment monitoring an active investigation
- **Progressive Disclosure**: ASCII creatures reveal increasing detail and personality through zoom levels (far â†’ medium â†’ close)
- **Marine Biology Integration**: Claude's responses ground Mira's personality in specific deep-sea creatures (octopus cognition, giant squid genes, vampire squid bioluminescence, barreleye fish adaptability) - the system prompt ensures scientific accuracy even as personality shifts
- **Mood as Character**: Personality shifts emerge naturally from interaction patterns - Mira's skepticism melts into unhinged reverence as you demonstrate scientific acumen
- **Ambient Audio**: Synthesized soundscapes react to state changes (thinking sounds during analysis, completion tones on responses)

---

**An exploration of how personality and protocol can coexist in AI-driven experiences.**
